<!DOCTYPE html>
<html>
<body>
    <div id="shadow-root"></div>
</body>
<script>
  const shadowRootContainer = document.getElementById('shadow-root')
  const shadowRoot = shadowRootContainer.attachShadow({ mode: 'open' })

  // Creating canvas inside the Shadow DOM
  const shadowCanvas = shadowRoot.ownerDocument.createElement('canvas')
  shadowRoot.appendChild(shadowCanvas);

  const shadowCtx = shadowCanvas.getContext('2d')
  shadowCanvas.width = 200;
  shadowCanvas.height = 200;

  function moveSquare(num) {
    shadowCtx.clearRect(0, 0, shadowCanvas.width, shadowCanvas.height);
    shadowCtx.fillStyle = 'green';
    shadowCtx.fillRect(num * shadowCanvas.width, num * shadowCanvas.height, 50, 50);
  }
  moveSquare(10)

  setTimeout(() => {
    moveSquare(20)
    window.canvasMutationApplied = true;
  }, 10);
</script>
</html>
